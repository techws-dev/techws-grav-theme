{% set min_chars = config.get('plugins.simplesearch.min_query_length', 3) %}
<div class="block">
    <form name="search" data-simplesearch-form>
        <div class="field has-addons">
            <div class="control is-expanded">
                <input
                    name="searchfield"
                    class="input"
                    aria-label="search"
                    type="text"
                    {% if min_chars > 0 %} data-min="{{- min_chars -}}" {% endif %}
                    required
                    placeholder="{{"PLUGIN_SIMPLESEARCH.SEARCH_PLACEHOLDER"|t}}"
                    value="{{ query|e }}"
                    autocomplete="off"
                    data-search-invalid="{{ "PLUGIN_SIMPLESEARCH.SEARCH_FIELD_MINIMUM_CHARACTERS"|t(min_chars)|raw }}"
                    data-search-separator="{{ config.system.param_sep }}"
                    data-search-input="{{ base_url }}{{ config.plugins.simplesearch.route == '@self' ? '' : (config.plugins.simplesearch.route == '/' ? '' : config.plugins.simplesearch.route) }}/query"
                />
            </div>
            {% if config.plugins.simplesearch.display_button %}
            <div class="control">
                <button type="submit" class="button is-primary">
                    <span class="icon is-small">
                        <i class="fa fa-search"></i>
                    </span>
                </button>
            </div>
            {% endif %}
        </div>
    </form>
</div>